import{a as c}from"./useConfigInject.58732bf7.js";import{r as f,g as y,d as O,j as h,b as P}from"./entry.37c85000.js";import"./Search.887af709.js";import{c as k,B as $}from"./button.62af8ef2.js";var x=function(){var e=f(!1);return y(function(){e.value=!0}),e};const D=x;var F={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:Object,emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function p(r){return!!(r&&r.then)}const N=O({compatConfig:{MODE:3},name:"ActionButton",props:F,setup:function(e,b){var B=b.slots,u=f(!1),v=f(),i=f(!1),d,m=D();h(function(){e.autofocus&&(d=setTimeout(function(){var n;return(n=v.value.$el)===null||n===void 0?void 0:n.focus()}))}),y(function(){clearTimeout(d)});var C=function(o){var t=e.close;p(o)&&(i.value=!0,o.then(function(){m.value||(i.value=!1),t.apply(void 0,arguments),u.value=!1},function(l){console.error(l),m.value||(i.value=!1),u.value=!1}))},g=function(o){var t=e.actionFn,l=e.close,s=l===void 0?function(){}:l;if(!u.value){if(u.value=!0,!t){s();return}var a;if(e.emitEvent){if(a=t(o),e.quitOnNullishReturnValue&&!p(a)){u.value=!1,s(o);return}}else if(t.length)a=t(s),u.value=!1;else if(a=t(),!a){s();return}C(a)}};return function(){var n=e.type,o=e.prefixCls,t=e.buttonProps;return P($,c(c(c({},k(n)),{},{onClick:g,loading:i.value,prefixCls:o},t),{},{ref:v}),B)}}});export{N as A};
